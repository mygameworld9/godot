## 1. 项目简介



这是一个使用 Godot Engine 开发的 2D 平台跳跃游戏。玩家将操控角色在一个充满挑战的平台世界中跳跃、移动、翻滚，避开障碍，击败敌人，并收集物品以获取分数。本游戏旨在展示 Godot 引擎在 2D 游戏开发方面的能力，并实现基础的平台跳跃核心机制。



## 2. 核心玩法与特性



- **平台跳跃**：玩家可以在各类平台上进行精准跳跃。
- **角色移动**：支持左右移动控制。
- **翻滚机制**：独特的翻滚动作，可用于快速通过狭窄区域或躲避敌人攻击（在某些设计中可能带有无敌帧）。
- **敌人交互**：包含基础敌人，玩家可以对其造成伤害。
- **分数系统**：通过收集金币或击败敌人获取分数。
- **受击反馈**：角色在受到伤害时会有视觉和听觉反馈。



## 3. 操作指南



- **W / 方向键上**：跳跃
- **A / 方向键左**：向左移动
- **D / 方向键右**：向右移动
- **C / Shift**：翻滚



## 4. 技术栈



- **游戏引擎**：Godot Engine (版本号，例如：Godot 4.2.1 Stable)
- **编程语言**：GDScript
- **游戏类型**：2D 平台跳跃游戏





## 5. 关键实现点与功能模块





### **5.1 玩家角色**



- **输入处理**：W/上箭头（跳跃），A/左箭头，D/右箭头（移动），C/Shift（翻滚）。
- **状态机/动画管理**：实现 Idle（站立），Run（跑动），Jump（跳跃），Fall（下落），Roll（翻滚），Hit（受击）等动画状态切换。
- **平台跳跃物理**：使用 `CharacterBody2D` 实现精准的平台跳跃，包括重力、跳跃高度、空中控制等。
- **翻滚机制**：
  - `_process` 或 `_physics_process` 中处理翻滚时的移动速度和碰撞体的调整。
  - 翻滚动画播放和持续时间控制。
  - 可能包含短暂的无敌帧（通过修改碰撞层或状态来避免受伤害）。
- **伤害处理**：接收来自敌人的伤害，扣除生命值，播放受击动画和音效。



### **5.2 敌人**



- **基础移动**：实现左右巡逻或特定路径移动。
- **射线检测**：使用 `RayCast2D` 检测前方地面边缘或障碍物（如玩家），实现智能转向。
  - **关键点**：`RayCast2D` 的 `Collision Mask` 精确配置，以**忽略玩家本体**，只检测墙壁或地面，从而实现怪物**无视玩家进行移动和转向**。
- **碰撞伤害**：通过 `Area2D`（HurtBox）检测玩家，并对玩家造成伤害。
- **生命值与死亡**：`hp` 变量管理生命值，`take_damage` 函数处理受击。当 `hp <= 0` 时，播放死亡动画，禁用碰撞，并最终销毁。



### **5.3 金币**



- **可收集物品**：通过 `Area2D` 检测玩家进入，触发拾取逻辑。
- **动画与音效**：拾取时播放金币闪烁动画和收集音效。
- **分数增加**：通过调用全局 `GameManage`（单例）的 `add_point` 函数增加玩家分数。
- **销毁**：拾取后短暂延迟或动画结束后 `queue_free()` 销毁。



### **5.4 游戏管理（GameManage.gd - 单例）**



- **全局分数管理**：存储和更新玩家的总分数。
- **UI 更新**：负责将当前分数更新到 UI 界面。
- **场景切换/游戏状态管理**：未来可扩展控制游戏开始、暂停、结束、关卡切换等。





## 6. 开发环境



- 操作系统：Windows 11
- Godot Engine 版本：Godot 4.4.1 Stable]

